# Project report 3

#### 組別：Team 19
#### 組員：藍琬茜、黃佩珊、廖芷嫺

## 1. 系統內容功能詳細敘述
本系統主要涵蓋以下功能：
 - 使用者註冊與Email登入: 支援使用者使用帳號或是電子郵件註冊及登入，以保障安全性。
 - 個人書籍管理: 可依照個人喜好新增、刪除及瀏覽收藏書籍，同時提供多個書架進行分類。
 - 書籍評分與評論: 用者可以對收藏的書籍進行評分與撰寫短評，同時系統可以顯示每本書的平均評分與使用者的個人評價。
 - 靜音分享推薦書籍: 可選擇一次分享一至五本書(暫定)給指定朋友，並設定分享開啟條件，包括：指定日期（如生日）、延遲幾天後自動開啟等。

## 2. 系統功能實作規劃

### 流程圖 
 - 本系統將製作以下主要流程圖以輔助功能開發與邏輯釐清：
1. 使用者註冊與登入流程圖  
   - 使用者填寫註冊表單後送出 → 後端檢查信箱是否已存在 → 若未存在則加密密碼後寫入 ’user‘ 表。
   - 登入時比對輸入之 email 與密碼是否正確 → 驗證通過則建立登入 session 並導回首頁。
     
2. 書籍總覽與分類搜尋流程圖  
   - 使用者進入書籍總覽頁 → 系統撈取 ‘book’ 表所有書籍 → 依照分類顯示書籍清單 → 使用者可點選分類篩選或輸入關鍵字搜尋 → 點選書籍進入書籍詳情頁。   

3. 書架與書籍管理流程圖  
   - 使用者新增書架（寫入 ‘book_self’ 表） → 在書籍搜尋結果中選擇書籍加入該書架（寫入 ‘bookshelf_record’ 表） → 使用者可於書架介面檢視、刪除書籍。

4. 書籍評分與評論流程圖  
   - 進入書籍詳情頁 → 使用者選擇星等與輸入評論 → 提交後寫入 ‘review’ 表 → 系統更新並顯示平均分數與評論列表。

5. 靜音分享流程圖  
   - 使用者於分享頁面選擇書籍 → 設定解鎖條件（如「三天後開啟」或「指定日期開啟」） → 選擇接收者 → 送出後寫入 ‘silent_share’, ‘share_book’, ‘receives’ 三個表 → 接收者登入時檢查是否達成解鎖條件 → 若達成則顯示書單與推薦訊息。

 ### 介面設計
 系統將採用響應式設計，確保在桌機與行動裝置上皆可流暢操作，主要介面包含：

 - **首頁（書籍總覽頁）**：登入後即進入首頁，提供所有書籍清單，依照 ‘category’ 欄位分區顯示（如科幻、推理、言情等），提供搜尋與排序功能。每本書顯示書名、作者、封面與平均評分，可點選詳情或加入書架。也會顯示推薦書籍與最近新增項目。
 - **註冊與登入頁**：輸入 email、密碼等資料，後端進行欄位驗證與登入狀態處理。
 - **書籍詳情頁**：顯示書籍封面、標題、作者、出版社、簡介、平均評分與評論列表。使用者可新增評分與短評，亦可將該書加入個人書架。
 - **書架管理頁**：顯示使用者目前的書架，支援建立新書架、檢視書架中書籍、刪除單一本或整個書架。
 - **靜音分享設定頁**：使用者選擇書籍並設定解鎖條件（指定日期、延遲天數等），並選擇接收者後送出。
 - **靜音分享接收頁**：接收者登入後可看到尚未解鎖的靜音推薦書單。當條件成立後，自動顯示推薦書籍與訊息內容。

###  資料庫連線與技術細節
- **後端語言**：PHP（運行於 XAMPP 環境）
- **前端技術**：HTML、CSS，手動設計頁面與互動邏輯，實作主要功能。
- **資料庫**：MYSQL
- **資料庫管理工具**：phpMyAdmin
- **安全設計**：
  - 密碼使用 ‘bcrypt’ 雜湊儲存
  - 查詢皆使用參數化語法防止 SQL injection

## 3. 預定工作分配
 - 組員1: 黃佩珊 | 前端頁面設計（登入、書櫃、評論）
 - 組員2: 藍琬茜 | 資料庫連接與CRUD操作（MySQL + PHP）
 - 組員3: 廖芷嫺 | 後端邏輯（PHP 控制流程）
 - 全員 | 資料庫設計與整合（包括DDL撰寫、ER圖轉換、報告撰寫與GitHub維護）
## 4. report 2修改內容
 - phpmyadmin產生的diagram
 ![phpmyadmin產生的diagram](<image_02.png>)

 以個人化書籍收藏與分享為主，總共定義6個entity sets：user, book, bookshelf, bookshelf_record, review, silent_share；6個relations：use_by, review_by, review_of, receives, share_book, bookshelf_record。
 - use_by：多對一關係。一位使用者可以建立多個書櫃，一個書櫃只能有一位使用者所持有，且一位使用者至少要有一個書櫃。
 - review_by：多對一關係。一位使用者可以對多本書籍進行評論和評分，但一個評論只能源於一位使用者，使用者可以無評論。
 - review_of：多對一關係。一本書籍可以有多個評論，一個評論只能代表評論一本書籍，書籍可以無評論。
 - receives : 多對一關係。一位使用者可以收到多個靜音分享，一個靜音分享內容
 - bookshelf_record：多對多關係。一個書櫃可以存放多本書籍，一本書也可以存放於多個書櫃中。
